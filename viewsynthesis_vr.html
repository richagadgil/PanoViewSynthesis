<html>
    <head>
        <title>My first three.js app</title>
        <style>
            body {
                margin: 0;
            }
            canvas {
                display: block;
            }
        </style>
    </head>
    <body>
        <script src="js/three.js"></script>
        <script type="module">
            import { VRButton } from './js/VRButton.js';

            function main() {
                var scene = new THREE.Scene();

                const fov = 75;
                const aspect = 2; // the canvas default
                const near = 0.1;
                const far = 200;
                const camera = new THREE.PerspectiveCamera(
                    fov,
                    aspect,
                    near,
                    far
                );
                camera.position.z = 0;

                var renderer = new THREE.WebGLRenderer();
                renderer.setPixelRatio(window.devicePixelRatio);
                renderer.setSize(window.innerWidth, window.innerHeight);
                document.body.appendChild(renderer.domElement);
                renderer.xr.enabled = true;
                renderer.xr.setReferenceSpaceType('local');
                renderer.setAnimationLoop( function () { renderer.render( scene, camera ); } );

                var boxWidth = 1;
                var boxHeight = 1;
                var boxDepth = 1;

                const cubes = []; // just an array we can use to rotate the cubes
                const loader = new THREE.TextureLoader();

                var depths;
                var pics;
                var order = [3, 1, 5, 6, 2, 4];

                var some_depths = [
                    100,
                    23.846155,
                    13.537119,
                    9.45122,
                    7.259953,
                    5.893536,
                    4.96,
                    4.281768,
                    3.7667074,
                    3.362256,
                    3.0362391,
                    2.7678573,
                    2.5430682,
                    2.3520486,
                    2.1877205,
                    2.0448549,
                    1.9195048,
                    1.808635,
                    1.7098732,
                    1.6213388,
                    1.5415217,
                    1.4691944,
                    1.40335,
                    1.3431542,
                    1.2879103,
                    1.2370312,
                    1.1900192,
                    1.1464497,
                    1.105958,
                    1.0682288,
                    1.032989,
                    1
                ];

                for (depths = 0; depths < 32; depths++) {
                    var materials = [];
                    for (pics = 0; pics < 6; pics++) {
                        materials.push(
                            new THREE.MeshBasicMaterial({
                                map: loader.load(
                                    './layers/image' +
                                        order[pics].toString() +
                                        '_' +
                                        depths.toString() +
                                        '.png'
                                ),
                                side: THREE.BackSide,
                                transparent: true,
                                depthWrite: false,
                                blending: THREE.NormalBlending
                            })
                        );
                    }

                    const geometry = new THREE.BoxBufferGeometry(
                        boxWidth * some_depths[depths],
                        boxHeight * some_depths[depths],
                        boxDepth * some_depths[depths]
                    );

                    const cube = new THREE.Mesh(geometry, materials);

                    scene.add(cube);
                    cubes.push(cube);
                }

            }

            main();
        </script>
    </body>
</html>
